(this.webpackJsonpsliders=this.webpackJsonpsliders||[]).push([[0],{16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),s=a(6),i=a.n(s),r=a(3),l=a(4),o=a(1),j=a(7),u=a(8),d=function(){function e(t,a,c,n,s,i){Object(j.a)(this,e),this.actx=t,this.envelope=s||{attack:.005,decay:.1,sustain:.6,release:.1},this.osc=t.createOscillator(),this.osc.frequency.value=c,this.osc.detune.value=n,this.osc.type=a,this.gateGain=t.createGain(),this.osc.connect(this.gateGain),this.gateGain.connect(i),this.easing=.005,this.osc.start(),this.start()}return Object(u.a)(e,[{key:"start",value:function(){var e=this.actx.currentTime;this.gateGain.gain.cancelScheduledValues(e),this.gateGain.gain.setValueAtTime(0,e+this.easing),this.gateGain.gain.linearRampToValueAtTime(1,e+this.envelope.attack+this.easing),this.gateGain.gain.linearRampToValueAtTime(this.envelope.sustain,e+this.envelope.attack+this.envelope.decay+this.easing)}},{key:"stop",value:function(){var e=this,t=this.actx.currentTime;this.gateGain.gain.cancelScheduledValues(t),this.gateGain.gain.setTargetAtTime(0,t,this.envelope.release+this.easing),setTimeout((function(){e.osc.disconnect()}),1e4)}}]),e}(),h=a(0),b=new AudioContext,O=b.destination,p=b.createGain();p.gain.value=.2;var v=b.createBiquadFilter();p.connect(v),v.connect(O);var g=n.a.createContext(),x=[];function y(e,t){var a=t.payload||{},c=a.id,n=a.value,s=(a.note,a.freq);switch(t.type){case"MAKE_OSC":var i=new d(b,e.osc1Settings.type,s,e.osc1Settings.detune,e.envelope,p);return x.push(i),Object(o.a)({},e);case"KILL_OSC":var r=[];return x.forEach((function(e){Math.round(e.osc.frequency.value)===Math.round(s)?e.stop():r.push(e)})),x=r,Object(o.a)({},e);case"CHANGE_OSC1":return Object(o.a)(Object(o.a)({},e),{},{osc1Settings:Object(o.a)(Object(o.a)({},e.osc1Settings),{},Object(l.a)({},c,n))});case"CHANGE_OSC1_TYPE":return Object(o.a)(Object(o.a)({},e),{},{osc1Settings:Object(o.a)(Object(o.a)({},e.osc1Settings),{},{type:c})});case"CHANGE_FILTER":return v[c].value=n,Object(o.a)(Object(o.a)({},e),{},{filterSettings:Object(o.a)(Object(o.a)({},e.filterSettings),{},Object(l.a)({},c,n))});case"CHANGE_FILTER_TYPE":return v.type=c,Object(o.a)(Object(o.a)({},e),{},{filterSettings:Object(o.a)(Object(o.a)({},e.filterSettings),{},{type:c})});case"CHANGE_ADSR":return Object(o.a)(Object(o.a)({},e),{},{envelope:Object(o.a)(Object(o.a)({},e.envelope),{},Object(l.a)({},c,Number(n)))});default:return console.log("reducer error. action: ",t),Object(o.a)({},e)}}function m(e){var t=n.a.useReducer(y,{osc1Settings:{detune:0,type:"sine"},filterSettings:{frequency:v.frequency.value,detune:v.detune.value,Q:v.Q.value,gain:v.gain.value,type:v.type},envelope:{attack:.005,decay:.1,sustain:.6,release:.1}});return Object(h.jsx)(g.Provider,{value:t,children:e.children})}var f=function(){var e=Object(c.useContext)(g),t=Object(r.a)(e,2),a=t[0],n=t[1],s=a.osc1Settings,i=s.type,l=s.detune,o=function(e){var t=e.target.id;n({type:"CHANGE_OSC1_TYPE",payload:{id:t}})};return Object(h.jsxs)("div",{className:"control",children:[Object(h.jsx)("h2",{children:"osc 1"}),Object(h.jsxs)("div",{className:"param",children:[Object(h.jsx)("h3",{children:"detune"}),Object(h.jsx)("input",{value:l,onChange:function(e){var t=e.target,a=t.id,c=t.value;n({type:"CHANGE_OSC1",payload:{id:a,value:c}})},type:"range",id:"detune"})]}),Object(h.jsxs)("div",{className:"param",children:[Object(h.jsx)("h3",{children:"wave"}),Object(h.jsx)("button",{id:"sine",onClick:o,className:"".concat("sine"===i&&"active"),children:"sine"}),Object(h.jsx)("button",{id:"triangle",onClick:o,className:"".concat("triangle"===i&&"active"),children:"triangle"}),Object(h.jsx)("button",{id:"square",onClick:o,className:"".concat("square"===i&&"active"),children:"square"}),Object(h.jsx)("button",{id:"sawtooth",onClick:o,className:"".concat("sawtooth"===i&&"active"),children:"sawtooth"})]})]})},C=function(){var e=Object(c.useContext)(g),t=Object(r.a)(e,2),a=t[0],n=t[1],s=a.filterSettings,i=s.frequency,l=s.detune,o=s.Q,j=s.gain,u=s.type,d=function(e){var t=e.target,a=t.id,c=t.value;n({type:"CHANGE_FILTER",payload:{id:a,value:c}})},b=function(e){var t=e.target.id;n({type:"CHANGE_FILTER_TYPE",payload:{id:t}})};return Object(h.jsxs)("div",{className:"control",children:[Object(h.jsx)("h2",{children:"filter"}),Object(h.jsxs)("div",{className:"params",children:[Object(h.jsx)("h3",{children:"frequency"}),Object(h.jsx)("input",{value:i,type:"range",onChange:d,id:"frequency",max:"10000"})]}),Object(h.jsxs)("div",{className:"params",children:[Object(h.jsx)("h3",{children:"detune"}),Object(h.jsx)("input",{value:l,type:"range",onChange:d,id:"detune"})]}),Object(h.jsxs)("div",{className:"params",children:[Object(h.jsx)("h3",{children:"Q"}),Object(h.jsx)("input",{value:o,type:"range",onChange:d,id:"Q",max:"10",step:"0.1"})]}),Object(h.jsxs)("div",{className:"params",children:[Object(h.jsx)("h3",{children:"gain"}),Object(h.jsx)("input",{value:j,type:"range",onChange:d,id:"gain",max:"10",step:"0.1"})]}),Object(h.jsxs)("div",{className:"params",children:[Object(h.jsx)("h3",{children:"type"}),Object(h.jsx)("button",{onClick:b,id:"lowpass",className:"".concat("lowpass"===u&&"active"),children:"lowpass"}),Object(h.jsx)("button",{onClick:b,id:"highpass",className:"".concat("highpass"===u&&"active"),children:"highpass"}),Object(h.jsx)("button",{onClick:b,id:"notch",className:"".concat("notch"===u&&"active"),children:"notch"}),Object(h.jsx)("button",{onClick:b,id:"lowshelf",className:"".concat("lowshelf"===u&&"active"),children:"lowshelf"}),Object(h.jsx)("button",{onClick:b,id:"highshelf",className:"".concat("highshelf"===u&&"active"),children:"highshelf"})]})]})},N=a(9),S=a.n(N),k=function(){var e=Object(c.useContext)(g),t=Object(r.a)(e,2),a=(t[0],t[1]);return Object(c.useEffect)((function(){var e=new S.a({id:"keyboard",width:"449",height:"70",octaves:2,startNote:"C4",whiteKeyColour:"rgb(28, 198, 186)",blackKeyColour:"rgb(10, 70, 67)",activeColour:"rgb(166, 49, 172)",borderColour:"white"});e.keyDown=function(e,t){a({type:"MAKE_OSC",payload:{note:e,freq:t}})},e.keyUp=function(e,t){a({type:"KILL_OSC",payload:{note:e,freq:t}})}}),[]),Object(h.jsx)("div",{className:"keyboard",children:Object(h.jsx)("div",{id:"keyboard"})})},E=function(){var e=Object(c.useContext)(g),t=Object(r.a)(e,2),a=t[0],n=t[1],s=a.envelope,i=s.attack,l=s.decay,o=s.sustain,j=s.release,u=function(e){var t=e.target,a=t.id,c=t.value;n({type:"CHANGE_ADSR",payload:{id:a,value:c}})};return Object(h.jsxs)("div",{className:"control",children:[Object(h.jsx)("h2",{children:"ADSR"}),Object(h.jsxs)("div",{className:"param",children:[Object(h.jsx)("h3",{children:"attack"}),Object(h.jsx)("input",{type:"range",id:"attack",onChange:u,max:"2",step:"0.02",value:i})]}),Object(h.jsxs)("div",{className:"param",children:[Object(h.jsx)("h3",{children:"decay"}),Object(h.jsx)("input",{type:"range",id:"decay",onChange:u,max:"1",step:"0.01",value:l})]}),Object(h.jsxs)("div",{className:"param",children:[Object(h.jsx)("h3",{children:"sustain"}),Object(h.jsx)("input",{type:"range",id:"sustain",onChange:u,max:"1",step:"0.01",value:o})]}),Object(h.jsxs)("div",{className:"param",children:[Object(h.jsx)("h3",{children:"release"}),Object(h.jsx)("input",{type:"range",id:"release",onChange:u,value:j})]})]})};a(16);var A=function(){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("h1",{className:"center",children:"sliders"}),Object(h.jsx)(f,{}),Object(h.jsx)(E,{}),Object(h.jsx)(C,{}),Object(h.jsx)(k,{})]})};i.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(m,{children:Object(h.jsx)(A,{})})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.be8d3415.chunk.js.map